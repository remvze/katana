---
import Layout from '@/layouts/layout.astro';

import { EncryptedUrl } from '@/components/encrypted-url';

import { getEncryptedUrl } from '@/lib/url';

const { slug } = Astro.params;

const data = await getEncryptedUrl(slug);

if (!data) {
  return Astro.rewrite('/404');
}
---

<Layout>
  <EncryptedUrl client:load encryptedUrl={data.encrypted_url} />
</Layout>
